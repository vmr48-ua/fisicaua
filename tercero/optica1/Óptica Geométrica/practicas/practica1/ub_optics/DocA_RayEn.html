<HTML>

<HEAD>

<TITLE>Documentación programa Trazado de rayos</TITLE>
<META NAME="description" CONTENT="hypertext">
<META NAME="keywords" CONTENT="hypertext">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html">
<META NAME="Generator" CONTENT="LaTeX2HTML v2K.1beta">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<LINK REL="STYLESHEET" HREF="entradaA.css">


<h1 class="h1joc">Ray tracing</h1>
<p>This applet shows the behavior of optical systems, such as lenses, projectors, telescopes, etc. It includes the calculation of their characteristics (cardinal elements) and image formation, either by using paraxial optical approximation or by exact calculation. In the latter case you can see and analyze the system's optical aberrations.</p>
<p>The initial page is divided into two windows, one for &quot;Short focal systems&quot; and the other one for &quot;Long focal systems&quot;: both windows present the same choices, the only differences being the maximum distance in the ray tracing graph and the lenses' focal range.</p>
<h2 class="h2joc">Preliminary sketch (paraxial approximation)</h2>
<p>In this window we can design the optical system, and we see its behavior under paraxial optical approximation. In the upper window there is the ray tracing for the selected objects (up to two) as the light traverses the lenses and stops added to the system (up to six).
<h3 class="h3joc">Objects</h3>
<p>We can study the ray tracing corresponding to one or two objects, which can be axial objects or off-axis objects. When the button &quot;Object 1" or "Object 2" is pressed, some sliders appear, so we can modify their characteristics: whether it is a real or virtual object, and its horizontal position (when putting the slider to the left, the object disappears). While the &quot;Half field&quot; slider is kept at zero, the program just shows the ray tracing for an axial object (green rays for Object 1 and yellow rays for Object 2). When modifying the &quot;Half field&quot; value, an object forming the corresponding angle with the horizontal axis is added (blue for Object 1 and orange for Object 2).
<h3 class="h3joc">Lenses and stops </h3>
  <p>We can add up to six elements to the system, which can be lenses or stops. By pressing one of the buttons labeled from 1 to 6, we choose the characteristics of the corresponding element:</p>
  <ul>
    <li><b>Lenses</b>: when the &quot;Lens&quot; button is on, we can define its horizontal position and its power &#966;' or focal distance (f'), which are related according to:</li>
    <p align="center"> <img src="formules/Ray_Ec1.gif"></p>
    <p>When f' is given in meters, the power &#966;' is in diopters. For convergent lenses, both f' and &#966;' are positive, while they are negative for divergent lenses. On the other hand, by default all the lenses have a stop of 70 mm and are centered with regard to the optical axis.</p>
    <li><strong>Stop</strong>: when the &quot;Stop&quot; button is on, the program adds a stop centered on the axis, which limits the amount of light reaching the imaging area. We can modify its horizontal position and its diameter. When the &quot;Diameter&quot; slider is put at the left end, the stop disappears.</li>
  </ul>
  <h3 class="h3joc">&nbsp;</h3>
  <p>For the system that has been designed (we have added lenses, stops and objects), the upper window shows the corresponding ray tracing. In paraxial Optics, the law for image formation is Gauss' law: for a given object being a distance s (<b>object distance</b>) from a lens of focal length f', its image will be at a distance s' (<b>image distance</b>) from the lens, where:</p>
  <p align="center"> <img src="formules/Ray_Ec2.gif"></p>
  <p>Here we suppose that the lens is placed in a medium of refraction index equal to one. We consider thin lenses, so that the distances are taken from their surfaces. Distances are positive for objects/images placed at the right of the lens, and negative to the left.</p>
  <p>For example, the image of an object at the origin through a lens of focal f'=200 mm, placed 600 mm from the origin, is:</p>
  <p align="center"> <img src="formules/Ray_Ec3.gif"></p>
  <p>That is, it is formed 300 mm away from the lens, which corresponds to an absolute position from the origin of 900 mm.</p>
  <p>For an off-axis object, we can define the <b>lateral magnification</b> (&#946;') through the system as the relationship between the size of the image (y') and the size of the object (y), and it is given by: 
  <p align="center"> <img src="formules/Ray_Ec4.gif"></p>
  <p>For the above example:</p>
  <p align="center"> <img src="formules/Ray_Ec5.gif"></p>
  <p>That is, if we consider an object with a half field of 4&ordm;, having a size</p>
  <p align="center"> <img src="formules/Ray_Ec6.gif"></p>
  <p>above the axis (positive), the size of its image will be:</p>
  <p align="center"> <img src="formules/Ray_Ec7.gif"></p>
  <p>That is, it will be inverted and half-sized. </p>
  <p>For a <b>compound lens system</b> (having more than one lens), the image formation is done through each of the lenses, one after the other: 
  <p align="center"> <img src="formules/Ray_Ec8.gif"></p>
  <p>The subscripts refer to image formation through lens i of focal f'<sub>i</sub> (there are N lenses), for an object placed at an object distance s<sub>i</sub>. The relationship between image distance to lens i ( s'<sub>i</sub>) and the object distance to the next lens i+1 (s<sub>i+1</sub>), is: 
  <p align="center"> <img src="formules/Ray_Ec9.gif"></p>
  <p>where d<sub>i,i+1</sub> is the lens separation (position of lens i+1 with regard to lens i). It is positive if lens i+1 is at the right of lens i.
  <p>The magnification through the compound system can be obtained as the product of the lateral magnifications through each lens: 
  <p align="center"> <img src="formules/Ray_Ec10.gif"></p>
  <p> The program shows, in all cases, the position and size of the <b>aperture stop (D.A.)</b>, the <b>entrance pupil (P.E.)</b> and the <b>exit pupil (P.S.)</b> of the system. The aperture stop of an optical system is the element (opening) that limits the amount of light that passes through the system from the object. The image of the aperture stop in the object or image space is called entrance or exit pupil, respectively.</p>
  <p>Objects or images can be real (light rays  converge and cross in a point) or virtual (rays seem to converge or diverge to/from a point). In the latter case, we can press the button &quot;Show virtual object&quot; or &quot;Show virtual image&quot; so that the ray tracing shows the rays' extensions with a dotted line, to the position of the virtual object or image, respectively.</p>
  <h3 class="h3joc">Cardinal points</h3>
  <p>By pressing the button &quot;Cardinal points&quot;, we can see in the lower part of the window the ray tracing showing the geometrical determination of the cardinal points and planes of the optical system: the foci and focal planes (in red) and the principal points and planes (in magenta).</p>
  <ul>
    <li><b>Foci and focal planes</b>: the image through an optical system of an on-axis point at infinite distance is the image focus (F'). The plane perpendicular to the axis that contains F' is the image focal plane. In the same way, the object focus (F) of an optical system is the point for which all rays emerge parallel to the axis (on-axis image at infinity), and the object focal plane is the plane that contains F and is perpendicular to the axis. The position of F can be found graphically tracing a ray parallel to the axis from the image space (from the right) and finding its intersection with the axis after traversing the system (from right to left). The image focus F' can be determined in a similar way.</li>
    <li><b>Principal planes and points</b>: the principal planes (object and image, conjugates between them) are planes perpendicular to the optical axis for which the lateral magnification &#946;' is equal to one. Their intersections with the axis are the principal points H and H', respectively. The image principal plane is obtained by tracing a ray parallel to the axis (which crosses the axis at F' at the exit) and finding the intersection between the extensions of the incident and emerging ray. The plane that contains that intersection point perpendicular to the axis is the image principal plane. The object principal plane is obtained similarly, but the ray parallel to the axis is traced from left to right, in the same way as to find F.</li>
  </ul>
  <p>When having a <b>single lens</b>, which is supposed to be <b>thin</b>, the object and image principal planes coincide with the lens surface, and the position of F and F' can be easily determined from its object and image focals distances:</p>
  <p align="center"> <img src="formules/Ray_Ec11.gif"></p>
  <p>The object and image focal distances are equal and opposite in sign because we are supposing that the refractive indexes before and after the lens are the same.</p>
  <p>For a <b>compound system</b> with two lenses of focals f'<sub>1</sub> and f'<sub>2</sub> placed in the same medium, the focal distances and positions of the principal planes can be computed as:</p>
  <p align="center"> <img src="formules/Ray_Ec12.gif"></p>
  <p>where d<sub>1,2</sub> is, for thin lenses approximation, the distance between lens 1 and 2 (positive if lens 2 is to the right of lens 1). H<sub>1</sub> and H'<sub>2</sub> are the object principal plane for the first lens and image principal plane for the second one, respectively, and coincide with their corresponding surfaces.</p>
  <h2 class="h2joc">Exact calculation</h2>
  <p>In this section we can see image formation through an optical system without the approximations of paraxial Optics, which are not valid when apertures and fields in the system are not small. In this case, the images have some distortions compared to the original object. These are known as <b>aberrations</b> (the image of a point is not a point).</p>
  <p>The program shows the real image formed through the system, both on and off axis. When the button &quot;Image&quot; is pressed, we can change its characteristics: distance from the paraxial plane to the image plane and the scale of the visualization window. The program gives the paraxial plane position, where the image would form following paraxial Optics approximations.</p>
  <p>By default (&quot;monochromatic&quot; image), the image is calculated for a single wavelength,</p>
  <p align="center"> <img src="formules/Ray_Ec13.gif"></p>
  <p>(green). In this case we can study<b> spherical aberration</b>, <b>coma</b> and <b>astigmatism</b>. The program computes a merit function, both on-axis and off-axis, which is related to the quality of the image. If the button &quot;Color&quot; is on, images for</p>
  <p align="center"> <img src="formules/Ray_Ec14.gif"></p>
  <p>are also shown, in the corresponding colors (blue and red, respectively). In this case we can study <b>chromatic aberration</b>.</p>
  <p>We can change characteristics of the object (position and field), of the lenses and of the stops (position and diameter). The lenses' case needs special attention: here the calculation is exact, we can change the position and power (or focal length) of the lenses, as well as the radii of their external surfaces and their refractive index. For a fixed power or focal length, we can see changes in aberrations depending on the radii. When studying colored images, we can also modify the lenses' refractive index n<sub>d</sub> (for a wavelength &#955;<sub>d</sub>) and the Abbe number, defined as </p>
  <p align="center"> <img src="formules/Ray_Ec15.gif"></p>
  <p>where n<sub>F</sub> and n<sub>C</sub> are the refractive indexes for &#955;<sub>F</sub> and &#955;<sub>C</sub>, respectively. The Abbe number characterizes the  chromatic dispersion of the lens.</p>
  <h2 class="h2joc">Read file </h2>
  <p>The program retrieves the data defined on the &quot;Preliminary sketch&quot; that was previously recorded in a file (see next section).</p>
  <h2 class="h2joc">Save to file</h2>
  <p>When this button is pressed, the program saves to a file the optical system characteristics designed in the &quot;Preliminary sketch&quot; (objects, lenses and stops), so that they can be retrieved afterwards.</p>
<br>
<h2 class="h2joc">Glossary</h2>

<table width="455" border="0" align="left" cellpadding="5" cellspacing="0">
  <tr> 
    <td class="glostit" width="168">Preliminary sketch </td>
    <td width="55">&nbsp;</td>
    <td class="glostit" width="161">Exact calculation (lens) </td>
    <td width="31">&nbsp;</td>
  </tr>
  <tr> 
    <td class="glost" width="168">Power</td>
    <td width="55">&#966;'</td>
    <td class="glost" width="161">Index</td>
    <td width="31">n<sub>d</sub></td>
  </tr>
  <tr>
    <td class="glost" width="168">Focal</td>
    <td width="55">f'</td> 
    <td class="glost" width="161">Abbe (number ) </td>
    <td width="31">&#957;<sub>d</sub></td>
  </tr>
  <tr>
    <td class="glost" width="168">Aperture stop </td>
    <td width="55">D.A.</td>
    <td class="glost" width="161">&nbsp;</td>
    <td width="31">&nbsp;</td>
  </tr>
  <tr>
    <td class="glost" width="168">Entrance pupil </td>
    <td width="55">P.E.</td>
    <td class="glost" width="161">&nbsp;</td>
    <td width="31">&nbsp;</td>
  </tr>
  <tr>
    <td class="glost" width="168">Exit pupil </td>
    <td width="55">P.S.</td>
    <td class="glost" width="161">&nbsp;</td>
    <td width="31">&nbsp;</td>
  </tr>
  <tr>
    <td class="glost" width="168">Object principal plane </td>
    <td width="55">H</td> 
    <td class="glost" width="161">&nbsp;</td>
    <td width="31">&nbsp;</td>
  </tr>
  <tr>
    <td class="glost">Image principal plane </td>
    <td>H'</td>
    <td class="glost" width="161">&nbsp;</td>
    <td width="31">&nbsp;</td>
  </tr>
  <tr> 
    <td class="glost" width="168">Object focus </td>
    <td width="55">F</td>
    <td class="glost" width="161">&nbsp;</td>
    <td width="31">&nbsp;</td>
  </tr>
  <tr> 
    <td class="glost" width="168">Image focus </td>
    <td width="55">F'</td>
    <td class="glost" width="161">&nbsp;</td>
    <td width="31">&nbsp;</td>
  </tr>
</table>
</BODY>
</HTML>